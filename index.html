<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <title>Psychrométrique</title>
    <script type="text/javascript" src="CalculPsychrometrique.js"></script>
    <script type="text/javascript" src="GraphiquePsychrometrique.js"></script>
    <script type="text/javascript" src="DocumentPsychrometrique.js"></script>
</head>
<body>
<h1>Psychrométrie</h1>
<div style="display: table; width: auto;">
    <div style="display: table-row;">
        <div style=" display: table-cell;">
            <div class="align">
                <div id="Calculateur"></div>
                <div id="ListPoint" class="align"></div>
            </div>
        </div>
        <div style="display: table-cell;" >

        </div>
    </div>
</div>
<canvas id="Graph" onmouseover="DocumentPsychro.Graph.logPos(event,'log');" onmousemove="DocumentPsychro.Graph.logPos(event,'log');" onclick="DocumentPsychro.OnClick(event);"></canvas>
<div id="log">°C,g/Kg</div>
<SCRIPT>
    var DocumentPsychro = new DocumentPsychrometrique(document);
    DocumentPsychro.setListPoint('ListPoint');
    DocumentPsychro.writeCalculateur("Calculateur");
    DocumentPsychro.Calc();
    DocumentPsychro.Graph.draw("Graph");
    //DocumentPsychro.writeOptionMassMolaire("MassMolaire");
    window.scrollTo(0, document.body.scrollHeight);
   // setInterval(DocumentPsychro.getCapteur(),1000);
    setInterval(function() {
        DocumentPsychro.Ajax.onreadystatechange = function() {
            if (DocumentPsychro.Ajax.readyState == 4) {

                var b = JSON.parse(DocumentPsychro.Ajax.responseText);
                var R = DocumentPsychro.Psychro.calcR(parseFloat(b.Humidite_Relative), parseFloat(b.Temperature), parseFloat(b.Pression * 100));
                if(DocumentPsychro.Graph.context!== undefined){
                    DocumentPsychro.Graph.draw("Graph");
                    DocumentPsychro.Graph.drawPointGraph(new point(b.Temperature, R * 1000), '#001fff', 25);
                }
            }
        };
        DocumentPsychro.Ajax.open("GET", DocumentPsychro.URL , true);
        DocumentPsychro.Ajax.send();
    }, 1000);
</SCRIPT>
</body>
